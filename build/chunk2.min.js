let themes=[{label:"Algae",colors:"d9ed92-b5e48c-76c893-52b69a-34a0a4-1a759f-1e6091-184e77-ffbf69-fff".split("-").map(e=>"#"+e)},{label:"Forest",colors:"073b3a-0b6e4f-08a045-6bbf59-ddb771-fff".split("-").map(e=>"#"+e)},{label:"Blackwhite",colors:"eee-eaeaea-fafafa-111-fff".split("-").map(e=>"#"+e)},{label:"Carnival",colors:"d72638-3f88c5-f49d37-140f2d-f22b29-fe4a49-fed766-7fbb8f-009fb7-e6e6ea-fff-102a54".split("-").map(e=>"#"+e)},{label:"Modern",colors:"0e131f-38405f-59546c-8b939c-ff2244-2c0735-fff".split("-").map(e=>"#"+e)},{label:"Pastel",colors:"261447-f1e3f3-c2bbf0-8fb8ed-62bfed-3590f3-fff-FF8680".split("-").map(e=>"#"+e)},{label:"Taxi",colors:"ffc854-000-ffc854-000-fff".split("-").map(e=>"#"+e)},{label:"Breeze",colors:"07252F-7c6a0a-babd8d-ffdac6-fa9500-eb6424-FCFBF6".split("-").map(e=>"#"+e)},{label:"Rainbow",colors:"e71d36-ffca3a-b5e48c-1982c4-03045e-fff".split("-").map(e=>"#"+e)},{label:"Cold",colors:"0a369d-4472ca-5e7ce2-92b4f4-cfdee7-fff-000".split("-").map(e=>"#"+e)},{label:"Enchanted",colors:"e6e1c6-afac96-c0bda5-cc978e-f39c6b-f96a68-ff3864-261447-3a2958-fff".split("-").map(e=>"#"+e)},{label:"Delicious",colors:"000-1b2618-daddd8-c7d59f-daddd8-c7d59f-b7ce63-8fb339-4b5842-fafafa-FF715B".split("-").map(e=>"#"+e)},{label:"fire",colors:"a20021-f52f57-f79d5c-f3752b-ededf4-000".split("-").map(e=>"#"+e)},{label:"",colors:"ebe9e9-f3f8f2-3581b8-fcb07e-dee2d6-181175".split("-").map(e=>"#"+e)},{label:"Energetic",colors:"000000-1A4D2E-FF9F29-FAF3E3-FEE0C0-ff5c3f".split("-").map(e=>"#"+e)}],colors;var DEFAULT_SIZE=1200;let ratio=1;var WIDTH=window.innerWidth,HEIGHT=window.innerHeight,DIM=HEIGHT,M=DIM/DEFAULT_SIZE;class Wormhole{constructor(e){var t={p:createVector(0,0),intensity:random([-5,5]),r:500,rotate:1,attract:1};Object.assign(t,e),Object.assign(this,t)}update(){}}class Particle{constructor(e){var t={p:createVector(0,0),lastP:createVector(-1,-1),v:createVector(0,0),a:createVector(0,0),r:random(100),pointCount:random([3,5,6,7,8,9]),followRotateFactor:random(features.rotateFactors),color:random(colors),altColor:random(colors),steps:[int(random([2,3,10,20,30,50,120,150])),int(random([2,3,4]))],shrinkRatio:random([.995,.99,.99,.98,random(.9,.95)]),vNoiseScale:features.vNoiseScale,color2:random([255,255,random(colors)]),alive:!0,randomId:int(random(1e4)),xSpeedFactor:random([6,8,10,12]),ySpeedFactor:random([6,8,10,12])};t.maxR=t.r,Object.assign(t,e),Object.assign(this,t),this.originalP=this.p.copy()}draw(t){let o=this.r;if(!(o<0)){t.push();var s=color(this.color),e=color(0);if(t.fill(s),e.setAlpha(.7*(9-map(this.r,100,0,0,5,!0))),(t.drawingContext.shadowColor=e).setAlpha(255),t.drawingContext.shadowOffsetY=10,t.drawingContext.shadowOffsetX=10,"glow"==features.style&&(frameCount%16==1?(this.randomId%400!=0?t.fill(bgColor):(s.setAlpha(50),t.fill(s),t.blendMode(SCREEN)),t.strokeWeight(2),1==frameCount&&t.strokeWeight(4),t.stroke(s),(e=color(this.color)).setAlpha(50),t.drawingContext.shadowColor=e):(t.strokeWeight(.2),t.blendMode(SCREEN),t.fill(bgColor),t.noStroke())),"pure"!=features.style&&"area"!=features.style||frameCount%50==1&&(frameCount%150==1&&36<o?t.strokeWeight(3):(t.strokeWeight(3),t.drawingContext.setLineDash([1,3])),t.stroke(0,100)),"pure"==features.style&&(t.drawingContext.shadowColor=color(0,7)),t.translate(this.p.x,this.p.y),t.push(),"polygon"==features.shapeType){t.translate(0,-frameCount/(6+2*noise(10,seed))),t.rotate(frameCount/500),this.randomId%40==0&&t.rotate(frameCount/100+this.randomId%2),t.beginShape();var r=[];for(let e=0;e<this.pointCount;e++){var a=e/this.pointCount*2*PI,i=.8*o;t.vertex(cos(a)*i,sin(a)*i),this.randomId%200==0&&r.push([cos(a)*i,sin(a)*i])}t.endShape(CLOSE),r.forEach(e=>{t.line(-o/5,0,e[0],e[1])})}else if("triangle"==features.shapeType){t.translate(0,-frameCount/(8+2*noise(10,seed))),t.rotate(frameCount/2e3),this.randomId%40==0&&t.rotate(frameCount/1200+this.randomId%2),t.drawingContext.shadowOffsetY=10,t.drawingContext.shadowOffsetX=10,t.drawingContext.shadowColor=color(0,5),t.drawingContext.shadowColor=color(0,0),t.drawingContext.shadowOffsetY=0,t.drawingContext.shadowOffsetX=0,t.blendMode(BLEND),t.beginShape();var l=[];for(let e=0;e<3;e++){var h=e/this.pointCount*2*PI,n=1.25*o;t.vertex(cos(h)*n,sin(h)*n),this.randomId%200==0&&l.push([cos(h)*n,sin(h)*n])}t.endShape(CLOSE),l.forEach(e=>{t.line(-o/5,0,e[0],e[1])})}else if("rect"==features.shapeType||"squiggle"==features.shapeType){t.translate(frameCount/20,frameCount/20);let e=[0,0,0,0];if("squiggle"==features.shapeType&&(e=[int(noise(this.randomId)*o),int(noise(2*this.randomId)*o),int(noise(3*this.randomId)*o),int(noise(4*this.randomId)*o)]),"squiggle"==features.shapeType&&t.rotate(map(noise(10*this.randomId),0,1,-3,3)*frameCount/(30+100*noise(this.p.x/100,this.p.y/100))+noise(this.randomId)),1==frameCount&&(t.push(),t.stroke(this.color),t.fill(bgColor),t.strokeWeight(2),t.rect(0,0,1.1*o*1,1.1*o*1,e[0],e[1],e[2],e[3]),t.pop()),t.drawingContext.shadowOffsetY=10,t.drawingContext.shadowOffsetX=10,this.randomId%3==0&&frameCount>400+300*noise(5*this.randomId)?(t.rect(0,0,o/3,o/3),t.rect(2*o/3,0,o/3,o/3),t.rect(0,2*o/3,o/3,o/3),t.rect(2*o/3,2*o/3,o/3,o/3)):t.rect(0,0,+o,+o,e[0],e[1],e[2],e[3]),this.randomId%80==0&&(t.line(0,0,o,o),t.line(0,o,o,0)),frameCount%80==1&&this.randomId%3==0){t.strokeWeight(1);for(var d=0;d<o-15;d+=10)t.push(),t.translate(o,d+10),t.rotate(-PI/4),t.fill(this.color),t.ellipse(0,0,1,d%100==0?20:5),t.pop();for(var f=0;f<o;f+=10)t.push(),t.translate(f,o),t.rotate(-PI/4),t.fill(this.color),t.rect(0,0,1,f%100==0?20:5),t.pop()}}else if("ellipse"==features.shapeType)1==frameCount&&(t.push(),t.stroke(this.color),t.fill(bgColor),t.strokeWeight(2),t.ellipse(0,0,o,o),t.pop()),t.drawingContext.shadowColor=color(0,5),t.translate(-frameCount/(60+20*noise(10,this.randomId)),-frameCount/(60+20*noise(10,this.randomId))),t.drawingContext.shadowOffsetY=10,t.drawingContext.shadowOffsetX=10,t.drawingContext.shadowColor=color(0,0),t.drawingContext.shadowOffsetY=0,t.drawingContext.shadowOffsetX=0,t.blendMode(BLEND),t.ellipse(0,0,o,o);else if("noise"==features.shapeType&&(this.randomId%3==0||this.randomId%4==0)){dist(this.p.x,this.p.y,width/2,height/2),atan2(this.p.y-height/2,this.p.x-width/2);var c=.4*noise(this.randomId)+.03;t.beginShape();for(let e=0;e<2*PI;e+=c){var p=300*noise(this.randomId)+100,m=e+noise(frameCount/p,e,this.randomId)+this.randomId%360,p=1.2*this.r*noise(frameCount/p,e,this.randomId),C=cos(m)*p,m=sin(m)*p;vertex(C,m)}t.endShape(CLOSE)}if(t.pop(),features.hasDeco){let e=40;"shape"==features.style&&(e=30),"stroke"==features.style&&(e=35),this.randomId%e==0&&(t.fill(0),t.ellipse(0,o+10,2,2)),this.randomId%25==0&&(t.fill(bgColor),t.ellipse(o/2,0,2,2)),this.randomId%80==0&&(t.fill(255),s=2*noise(this.randomId,this.p.x/40,this.p.y/40)+1,t.ellipse(-o-10,o+10,s,s)),10<o&&(this.randomId+frameCount)%60==0&&this.randomId%4==0&&(t.fill(this.color2),t.ellipse(-this.r,4,4)),random()<.001&&frameCount%10==0&&(t.stroke(0),t.noFill(),t.ellipse(0,o+10,random(this.r)))}t.pop()}}update(){abs(brightness(color(this.altColor))-brightness(color(this.color)))<85&&(this.color=lerpColor(color(this.color),color(this.altColor),.005)),this.randomId%40==0&&frameCount%50==0&&(this.r-=10,this.p.x+=5,this.p.y+=5),this.randomId%77==0&&frameCount%50==0&&(this.r*=1.05,this.p.x+=5,this.p.y+=5),this.p.add(this.v),this.v.add(this.a),this.r*this.shrinkRatio<1?--this.r:this.r*=this.shrinkRatio,1<=this.shrinkRatio&&frameCount>50+100*noise(this.randomId)&&(this.alive=!1),this.r<=4&&(this.alive=!1),650<frameCount&&random()<.04&&this.randomId%6<=3&&(this.alive=!1),"level"==features.style&&300<frameCount&&random()<.03&&(this.alive=!1),(this.p.x+this.r>width+5*this.r||this.p.x-this.r<5*-this.r||this.p.y+this.r>height+5*this.r||this.p.y-this.r<5*-this.r)&&(this.alive=!1),"pure"!=features.style&&"level"!=features.style&&"area"!=features.style&&random()<.25&&frameCount%features.colorChangeFramSpan==0&&this.randomId%5==0&&(this.color=random(colors),this.color2=lerpColor(color(random(colors)),color(this.color),.6));var e,t=(e,t)=>int(e*t)/t,t=(this.v.x=t(noise(this.p.x/this.vNoiseScale,this.p.y/this.vNoiseScale)-.5,this.steps[0])*this.xSpeedFactor,this.v.y=t(noise(this.p.y/this.vNoiseScale,this.p.x/this.vNoiseScale)-.5,this.steps[1])*this.ySpeedFactor,atan2(this.p.y-height/2,this.p.x-width/2));dist(this.p.x,this.p.y,width/2,height/2);this.v.x+=cos(t+PI/2)*this.followRotateFactor,this.v.y+=sin(t+PI/2)*this.followRotateFactor,wormholes.forEach(e=>{var t=atan2(this.p.y-e.p.y,this.p.x-e.p.x),o=dist(this.p.x,this.p.y,e.p.x,e.p.y),o=map(o,0,e.r,1,0,!0),o=e.intensity*o*o;this.v.x+=e.rotate*o*cos(t+PI/2)+e.attract*o*cos(t),this.v.y+=e.rotate*o*sin(t+PI/2)+e.attract*o*sin(t)}),noise(this.p.x/60,this.p.y/60)<.2&&(t=atan2(this.v.x,this.v.y),e=this.v.mag(),t=int(t/2/PI*8)/8*2*PI,this.v.x=e*cos(t),this.v.y=e*sin(t)),"pure"==features.style&&(this.color=colors[2],this.color2=colors[2]),"area"==features.style&&(e=int(noise(this.p.x/features.mapScale,this.p.y/features.mapScale)*colors.length*2)%colors.length,t=colors[e],e=colors[(1+e)%colors.length],this.color=lerpColor(color(t),color(e),map(frameCount,0,600*(.5+noise(this.p.x/50,this.p.y/50)/2),0,1,!0))),"level"==features.style&&(t=int(noise(this.p.x/800,this.p.y/800)*colors.length*2+1+(.5+noise(this.p.x/50,this.p.y/50)/2)*frameCount/features.levelSpeed)%colors.length,this.color=colors[t])}}let sh1,shTxt,wC,oG,olayG,particles=[],wormholes=[],overallTexture,bgColor,sortedColors=[],selectedTheme;function preload(){noiseSeed(1e4*random()),sh1=new p5.Shader(this.renderer,vert,frag),shTxt=new p5.Shader(this.renderer,vert,frag_texture),selectedTheme=random(themes),colors=selectedTheme.colors,"Rainbow"!=selectedTheme.label&&(colors=colors.sort((e,t)=>random([-.5,.5]))),sortedColors=colors.sort((e,t)=>brightness(color(t))-brightness(color(e)))}