let themes=[{label:"Algae",colors:"d9ed92-b5e48c-76c893-52b69a-34a0a4-1a759f-1e6091-184e77-ffbf69-fff".split("-").map((e=>"#"+e))},{label:"Forest",colors:"073b3a-0b6e4f-08a045-6bbf59-ddb771-fff".split("-").map((e=>"#"+e))},{label:"Blackwhite",colors:"eee-eaeaea-fafafa-111-fff".split("-").map((e=>"#"+e))},{label:"Carnival",colors:"d72638-3f88c5-f49d37-140f2d-f22b29-fe4a49-fed766-7fbb8f-009fb7-e6e6ea-fff-102a54".split("-").map((e=>"#"+e))},{label:"Modern",colors:"0e131f-38405f-59546c-8b939c-ff2244-2c0735-fff".split("-").map((e=>"#"+e))},{label:"Pastel",colors:"261447-f1e3f3-c2bbf0-8fb8ed-62bfed-3590f3-fff-FF8680".split("-").map((e=>"#"+e))},{label:"Taxi",colors:"ffc854-000-ffc854-000-fff".split("-").map((e=>"#"+e))},{label:"Breeze",colors:"07252F-7c6a0a-babd8d-ffdac6-fa9500-eb6424-FCFBF6".split("-").map((e=>"#"+e))},{label:"Rainbow",colors:"e71d36-ffca3a-b5e48c-1982c4-03045e-fff".split("-").map((e=>"#"+e))},{label:"Cold",colors:"0a369d-4472ca-5e7ce2-92b4f4-cfdee7-fff-000".split("-").map((e=>"#"+e))},{label:"Enchanted",colors:"e6e1c6-afac96-c0bda5-cc978e-f39c6b-f96a68-ff3864-261447-3a2958-fff".split("-").map((e=>"#"+e))},{label:"Delicious",colors:"000-1b2618-daddd8-c7d59f-daddd8-c7d59f-b7ce63-8fb339-4b5842-fafafa-FF715B".split("-").map((e=>"#"+e))},{label:"fire",colors:"a20021-f52f57-f79d5c-f3752b-ededf4-000".split("-").map((e=>"#"+e))},{label:"",colors:"ebe9e9-f3f8f2-3581b8-fcb07e-dee2d6-181175".split("-").map((e=>"#"+e))}];var features={};function calFeatures(){features.style=random({mix:3,glow:1,area:9,pure:1,level:1}),features.mapScale=random(500,2800),features.levelSpeed=random([15,20,30,40]),features.type3D=random(["static","sharp"]),features.type3D="static",features.rotateFactors=random([[0],[0],[0],[0],[0,.05],[0,-.05],[.05,0,0,0,0,0,0,-.05]]),features.minPairId=1*random({0:30,1:10,2:1,3:1,4:1}),features.maxPairId=1*random({5:1,6:5,7:10,8:5}),features.layout=random({natural:4,ring:2,blocks:1,spiral:1,chess:1,pie:1}),features.vNoiseScale=random([40,50,75,100,120]),features.hasGrid=!1,features.hasBorder=!0,features.wormholeCount=random([1,2,3]),features.colorChangeFramSpan=random([30,40,60,100]),features.shapeType=random({rect:4,ellipse:5,polygon:3,triangle:1}),features.distortFactor="ellipse"==features.shapeType?.8:.1}let colors;calFeatures();var DEFAULT_SIZE=1400;let ratio=1;var WIDTH=window.innerWidth,HEIGHT=window.innerHeight,DIM=HEIGHT,M=DIM/DEFAULT_SIZE;console.log("hw",HEIGHT/WIDTH,ratio),console.log("dim",DIM,WIDTH,HEIGHT,M);class Wormhole{constructor(e){let t={p:createVector(0,0),intensity:random([-5,5]),r:500,rotate:1,attract:1};Object.assign(t,e),Object.assign(this,t)}update(){}}class Particle{constructor(e){let t={p:createVector(0,0),lastP:createVector(-1,-1),v:createVector(0,0),a:createVector(0,0),r:random(100),pointCount:random([3,5,6,7,8,9]),followRotateFactor:random(features.rotateFactors),color:random(colors),altColor:random(colors),steps:[int(random([2,3,10,20,30,50,120,150])),int(random([2,3,4]))],shrinkRatio:random([.995,.99,.99,.98,random(.9,.95)]),vNoiseScale:features.vNoiseScale,color2:random([255,255,random(colors)]),alive:!0,randomId:int(random(1e4)),xSpeedFactor:random([6,8,10,12]),ySpeedFactor:random([6,8,10,12])};t.maxR=t.r,Object.assign(t,e),Object.assign(this,t)}draw(e){let t=this.r;if(t<0)return;e.push();let o=color(this.color),s=color(0);if(e.fill(o),s.setAlpha(10-map(this.r,100,0,0,4,!0)),e.drawingContext.shadowColor=s,s.setAlpha(255),e.drawingContext.shadowOffsetY=10,e.drawingContext.shadowOffsetX=10,"glow"==features.style)if(frameCount%16==1){this.randomId%400!=0?e.fill(bgColor):(o.setAlpha(50),e.fill(o),e.blendMode(SCREEN)),e.strokeWeight(2),1==frameCount&&e.strokeWeight(4),e.stroke(o);let t=color(this.color);t.setAlpha(50),e.drawingContext.shadowColor=t}else e.blendMode(SCREEN),e.fill(bgColor),e.noStroke();if("pure"!=features.style&&"area"!=features.style||frameCount%30==1&&(frameCount%150==1&&t>36?e.strokeWeight(3):e.drawingContext.setLineDash([1.5,3]),e.stroke(0,200)),"pure"==features.style&&(e.drawingContext.shadowColor=color(0,7)),"squiggle"==features.style&&(e.drawingContext.shadowColor=color(0,20)),e.translate(this.p.x,this.p.y),e.push(),"polygon"==features.shapeType){e.translate(0,-frameCount/(6+2*noise(10,seed))),e.rotate(frameCount/500),this.randomId%40==0&&e.rotate(frameCount/100+this.randomId%2),e.beginShape();let o=[];for(let s=0;s<this.pointCount;s++){let r=s/this.pointCount*2*PI,a=.8*t;e.vertex(cos(r)*a,sin(r)*a),this.randomId%200==0&&o.push([cos(r)*a,sin(r)*a])}e.endShape(CLOSE),o.forEach((o=>{e.line(-t/5,0,o[0],o[1])}))}else if("triangle"==features.shapeType){e.translate(0,-frameCount/(8+2*noise(10,seed))),e.rotate(frameCount/2e3),this.randomId%40==0&&e.rotate(frameCount/1200+this.randomId%2),e.drawingContext.shadowOffsetY=10,e.drawingContext.shadowOffsetX=10,e.drawingContext.shadowColor=color(0,5),e.beginShape();let o=[];for(let s=0;s<3;s++){let r=s/this.pointCount*2*PI,a=1.25*t;e.vertex(cos(r)*a,sin(r)*a),this.randomId%200==0&&o.push([cos(r)*a,sin(r)*a])}e.endShape(CLOSE),o.forEach((o=>{e.line(-t/5,0,o[0],o[1])}))}else if("rect"==features.shapeType||"squiggle"==features.shapeType){e.translate(frameCount/20,frameCount/20);let o=[0,0,0,0];if("squiggle"==features.shapeType&&(o=[int(noise(this.randomId)*t),int(noise(2*this.randomId)*t),int(noise(3*this.randomId)*t),int(noise(4*this.randomId)*t)]),"squiggle"==features.shapeType&&e.rotate(map(noise(10*this.randomId),0,1,-3,3)*frameCount/(30+100*noise(this.p.x/100,this.p.y/100))+noise(this.randomId)),1==frameCount&&(e.push(),e.stroke(this.color),e.fill(bgColor),e.strokeWeight(2),e.rect(0,0,1.1*t*1,1.1*t*1,o[0],o[1],o[2],o[3]),e.pop()),e.drawingContext.shadowOffsetY=10,e.drawingContext.shadowOffsetX=10,this.randomId%3==0&&frameCount>400+300*noise(5*this.randomId)?(e.rect(0,0,t/3,t/3),e.rect(2*t/3,0,t/3,t/3),e.rect(0,2*t/3,t/3,t/3),e.rect(2*t/3,2*t/3,t/3,t/3)):e.rect(0,0,1*t,1*t,o[0],o[1],o[2],o[3]),this.randomId%80==0&&(e.line(0,0,t,t),e.line(0,t,t,0)),frameCount%80==1&&this.randomId%3==0){e.strokeWeight(1);for(var r=0;r<t-15;r+=10)e.push(),e.translate(t,r+10),e.rotate(-PI/4),e.fill(this.color),e.ellipse(0,0,1,r%100==0?20:5),e.pop();for(var a=0;a<t;a+=10)e.push(),e.translate(a,t),e.rotate(-PI/4),e.fill(this.color),e.rect(0,0,1,a%100==0?20:5),e.pop()}}else"ellipse"==features.shapeType&&(1==frameCount&&(e.push(),e.stroke(this.color),e.fill(bgColor),e.strokeWeight(2),e.ellipse(0,0,t,t),e.pop()),e.translate(0,-frameCount/(30+20*noise(10,this.randomId))),e.drawingContext.shadowOffsetY=10,e.drawingContext.shadowOffsetX=10,e.ellipse(0,0,t,t));e.pop();let i=40;if("shape"==features.style&&(i=30),"stroke"==features.style&&(i=35),this.randomId%50==0&&frameCount%120==0&&t>2&&(e.push(),e.translate(t+20,0),e.stroke(this.color2),e.translate(0,random([-this.r,this.r])),e.line(0,0,0,-5),e.line(0,0,-3,-5),e.line(0,0,3,-5),e.pop()),this.randomId%i==0&&(e.fill(0),e.ellipse(0,t+10,2,2)),this.randomId%25==0&&(e.fill(bgColor),e.ellipse(t/2,0,2,2)),this.randomId%80==0){e.fill(255);let o=2*noise(this.randomId,this.p.x/40,this.p.y/40)+1;e.ellipse(-t-10,t+10,o,o)}t>10&&(this.randomId+frameCount)%60==0&&this.randomId%4==0&&(e.fill(this.color2),e.ellipse(-this.r,4,4)),random()<.001&&frameCount%10==0&&(e.stroke(0),e.noFill(),e.ellipse(0,t+10,random(this.r))),e.pop()}update(){abs(brightness(color(this.altColor))-brightness(color(this.color)))<85&&(this.color=lerpColor(color(this.color),color(this.altColor),.005)),this.randomId%40==0&&frameCount%50==0&&(this.r-=10,this.p.x+=5,this.p.y+=5),this.randomId%77==0&&frameCount%50==0&&(this.r*=1.05,this.p.x+=5,this.p.y+=5),this.p.add(this.v),this.v.add(this.a),this.r*this.shrinkRatio<1?this.r-=1:this.r*=this.shrinkRatio,this.shrinkRatio>=1&&frameCount>50+100*noise(this.randomId)&&(this.alive=!1),this.r<=2&&(this.alive=!1),frameCount>650&&random()<.04&&this.randomId%6<=3&&(this.alive=!1),"level"==features.style&&frameCount>300&&random()<.03&&(this.alive=!1),(this.p.x+this.r>width+5*this.r||this.p.x-this.r<5*-this.r||this.p.y+this.r>height+5*this.r||this.p.y-this.r<5*-this.r)&&(this.alive=!1),"pure"!=features.style&&"level"!=features.style&&"area"!=features.style&&random()<.25&&frameCount%features.colorChangeFramSpan==0&&this.randomId%5==0&&(this.color=random(colors),this.color2=lerpColor(color(random(colors)),color(this.color),.6));let e=(e,t)=>int(e*t)/t;this.v.x=e(noise(this.p.x/this.vNoiseScale,this.p.y/this.vNoiseScale)-.5,this.steps[0])*this.xSpeedFactor,this.v.y=e(noise(this.p.y/this.vNoiseScale,this.p.x/this.vNoiseScale)-.5,this.steps[1])*this.ySpeedFactor;let t=atan2(this.p.y-height/2,this.p.x-width/2);dist(this.p.x,this.p.y,width/2,height/2);if(this.v.x+=cos(t+PI/2)*this.followRotateFactor,this.v.y+=sin(t+PI/2)*this.followRotateFactor,wormholes.forEach((e=>{let t=atan2(this.p.y-e.p.y,this.p.x-e.p.x),o=dist(this.p.x,this.p.y,e.p.x,e.p.y),s=map(o,0,e.r,1,0,!0),r=e.intensity*s*s;this.v.x+=e.rotate*r*cos(t+PI/2)+e.attract*r*cos(t),this.v.y+=e.rotate*r*sin(t+PI/2)+e.attract*r*sin(t)})),noise(this.p.x/60,this.p.y/60)<.2){let e=atan2(this.v.x,this.v.y),t=this.v.mag(),o=8,s=int(e/2/PI*o)/o*2*PI;this.v.x=t*cos(s),this.v.y=t*sin(s)}if("pure"==features.style&&(this.color=colors[2],this.color2=colors[2]),"area"==features.style){let e=int(noise(this.p.x/features.mapScale,this.p.y/features.mapScale)*colors.length*2)%colors.length,t=colors[e],o=colors[(e+1)%colors.length];this.color=lerpColor(color(t),color(o),map(frameCount,0,600*(.5+noise(this.p.x/50,this.p.y/50)/2),0,1,!0))}if("level"==features.style){let e=int(noise(this.p.x/800,this.p.y/800)*colors.length*2+1+(.5+noise(this.p.x/50,this.p.y/50)/2)*frameCount/features.levelSpeed)%colors.length;this.color=colors[e]}}}let sh1,shTxt,wC,oG,olayG,overallTexture,bgColor,selectedTheme,particles=[],wormholes=[],sortedColors=[];function preload(){noiseSeed(1e4*random()),sh1=new p5.Shader(this.renderer,vert,frag),shTxt=new p5.Shader(this.renderer,vert,frag_texture),selectedTheme=random(themes),colors=selectedTheme.colors,"Rainbow"!=selectedTheme.label&&(colors=colors.sort(((e,t)=>random([-.5,.5])))),sortedColors=colors.sort(((e,t)=>brightness(color(t))-brightness(color(e))))}
